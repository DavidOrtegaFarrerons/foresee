{{define "title"}}Account · Foresee{{end}}

{{define "main"}}
{{if .PendingResolutions}}
<div class="mb-10">
    <h2 class="text-xl font-semibold text-text-primary mb-2">
        Markets pending resolution
    </h2>
    <p class="text-sm text-text-muted mb-4">
        These markets have expired and require your resolution.
    </p>

    <div class="overflow-hidden rounded-xl border border-border-subtle bg-bg-elevated">
        <div class="divide-y divide-border-subtle">
            {{range .PendingResolutions}}
            <div class="p-4 sm:p-5 flex items-center justify-between gap-4">
                <div>
                    <a href="/markets/{{.ID}}"
                       class="text-base font-medium text-text-primary hover:text-accent transition">
                        {{.Title}}
                    </a>
                    <div class="mt-1 text-sm text-text-muted">
                        Category: {{.Category}}
                    </div>
                </div>

                <a href="/markets/{{.ID}}/resolve"
                   class="shrink-0 inline-flex items-center rounded-md bg-accent px-4 py-2 text-sm font-medium text-black hover:bg-accent-hover transition">
                    Resolve
                </a>
            </div>
            {{end}}
        </div>
    </div>
</div>
{{end}}

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

    <div class="mb-8">
        <h1 class="text-2xl sm:text-3xl font-semibold text-text-primary">
            My Bets
        </h1>
        <p class="mt-1 text-sm text-text-muted">
            All your prediction history in one place
        </p>
    </div>

    {{if not .BetHistory}}
    <div class="bg-bg-elevated border border-border-subtle rounded-xl p-6 text-center text-text-muted">
        You haven’t placed any bets yet.
    </div>
    {{else}}
    <div class="overflow-hidden rounded-xl border border-border-subtle bg-bg-elevated">
        <div class="divide-y divide-border-subtle">
            {{range .BetHistory}}
            <div class="p-4 sm:p-5 flex flex-col gap-3">

                <div class="flex items-start justify-between gap-4">
                    <div>
                        <a href="/markets/{{.MarketID}}"
                           class="text-base font-medium text-text-primary hover:text-accent transition">
                            {{.MarketTitle}}
                        </a>
                        <div class="mt-1 text-sm text-text-muted">
                            Picked:
                            <span class="text-text-primary">{{.OutcomeLabel}}</span>
                        </div>
                    </div>

                    {{if eq .Result "win"}}
                    <span class="shrink-0 inline-flex items-center rounded-full bg-success/15 px-3 py-1 text-xs font-medium text-success border border-success/30">
                        Won
                    </span>
                    {{else if eq .Result "lose"}}
                    <span class="shrink-0 inline-flex items-center rounded-full bg-danger/15 px-3 py-1 text-xs font-medium text-danger border border-danger/30">
                        Lost
                    </span>
                    {{else}}
                    <span class="shrink-0 inline-flex items-center rounded-full bg-bg-main px-3 py-1 text-xs font-medium text-text-muted border border-border-subtle">
                        Pending
                    </span>
                    {{end}}
                </div>

                <div class="flex items-center justify-between text-sm">
                    <div class="text-text-muted">
                        Stake:
                        <span class="text-text-primary font-medium">
                            {{.Amount}}
                        </span>
                    </div>

                    <div class="text-text-muted">
                        {{(.BetCreatedAt).Format "02 Jan 2006 · 15:04"}}
                    </div>
                </div>

                {{if eq .Result "win"}}
                <div class="text-sm text-success font-medium">
                    Payout: {{.Payout}}
                </div>
                {{end}}

                {{if eq .Result "lose"}}
                <div class="text-sm text-success font-medium">
                    Loss: {{.Amount}}
                </div>
                {{end}}

            </div>
            {{end}}
        </div>
    </div>
    {{end}}

</div>
{{end}}